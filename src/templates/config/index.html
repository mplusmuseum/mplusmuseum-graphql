<html>

<head>
  <title>GraphQL - config</title>
  {{> head}}
  <link href="/css/prism.css" rel="stylesheet" />
</head>

<body>

  {{> nav}}
  <section class="hero is-primary is-bold">
    <div class="hero-body">
      <div class="container">
        <h1 class="title capitalise is-1">
          Config
        </h1>
        <h2 class="subtitle">
          Set up all the connect to places here
        </h2>
      </div>
    </div>
  </section>

  <section class="section">
    <div class="container">

      <h1 class="title">
        <a name="handshake" class="hidename">Dashboard</a>
      </h1>

      <form method="post">
        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Dashboard URL</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <input class="input" type="text" name="dashboard" placeholder="{{#ifEqual NODE_ENV 'development'}}http://localhost:4002{{else}}https://domain.com{{/ifEqual}}"
                  {{#if config.dashboard.host}} value="{{config.dashboard.host}}" {{/if}}>
              </p>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Dashboard Handshake</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <p>
                  You should visit the Dashboard and go to the
                  <code>/config</code> page, at the top you will see a "handshake" token, copy that token and enter it
                  here that
                  will allow the GraphQL server to talk to the dashboard.
                </p>
                <input class="input" type="text" name="handshake" placeholder="a1b2c3d4e5f6g7h8i9j0k"
                  {{#if config.dashboard.handshake}} value="{{config.dashboard.handshake}}" {{/if}}>
              </p>
            </div>
          </div>
        </div>

        <div class="level">
          <div class="level-left">
            <div class="level-item">&nbsp;</div>
          </div>
          <div class="level-right">
            <div class="level-item">
              <p class="control">
                <button class="button is-primary" type="submit" value="updatedashboard" name="action">Update</button>
              </p>
            </div>
          </div>
        </div>
      </form>
      <hr />
    </div>
  </section>

  <section class="section">
    <div class="container">
      <h1 class="title">
        <a name="elasticsearch" class="hidename">Elastic Search</a>
      </h1>
      {{#if config.elasticsearch}}
        <p>
          Congratulations ElasticSearch has been set up
        </p>
        <p>
          You can reconfigure it below if needed.
        </p>
      {{/if}}
      <form method="post">

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">Elastic Search</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <input class="input" type="text" name="elasticsearch" placeholder="{{#ifEqual NODE_ENV 'development'}}http://localhost:9200{{else}}https://domain.com{{/ifEqual}}"
                  {{#if config.elasticsearch.host}} value="{{config.elasticsearch.host}}" {{/if}}>
              </p>
            </div>
          </div>
        </div>

        <div class="field is-horizontal">
          <div class="field-label is-normal">
            <label class="label">BaseTMS database "stub"</label>
          </div>
          <div class="field-body">
            <div class="field">
              <p class="control">
                <input class="input" type="text" name="baseTMS" placeholder="mplus" {{#if config.baseTMS}} value="{{config.baseTMS}}"
                  {{/if}}>
              </p>
            </div>
          </div>
        </div>

        <div class="level">
          <div class="level-left">
            <div class="level-item">&nbsp;</div>
          </div>
          <div class="level-right">
            <div class="level-item">
              <p class="control">
                <button class="button is-primary" type="submit" value="updateelasticsearch" name="action">Update</button>
              </p>
            </div>
          </div>
        </div>
      </form>
    </div>
  </section>

  {{> tail}}
</body>

</html>